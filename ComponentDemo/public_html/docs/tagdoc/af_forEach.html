<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2019-08-19 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>ADF RichClient API - 
    af:forEach</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20190819" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://www.oracle.com" id="bannerLeft">
                                                <img src="../../images/oracle_logo_red_large.png" alt="Oracle ADF Faces Rich Client" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2019-08-19</span>
                  &nbsp;| <span id="projectVersion">Version: 12-aspen-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Copyright (c) 2008, 2014, Oracle and/or its affiliates. All rights reserved. --><!-- Copyright 2012 The Apache Software Foundation.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- This file is a reproduction of the Trinidad tr:forEach documentation
  since we just port the for each tag into the ADF namespace. As a result of this,
  the documentation is copied here, modified to use the 'af:' tag prefix and
  reference ADF instead of Trinidad. -->
  
    <div class="section">
<h2>Summary<a name="Summary"></a></h2>
      
<p>
        <b>Tag name:</b> &lt;af:forEach&gt;
        <br />
      </p>
      
<p>
        The forEach tag provides additional functionality from the JSTL &lt;c:forEach&gt; tag. The
        tag is only supported in JSP.
      </p>
      
<div class="section">
<h3>Facelets<a name="Facelets"></a></h3>
        
<p>
          The &lt;af:forEach&gt; is not supported in facelets. As a convenience, the
          tag handler for the &lt;c:forEach&gt; will be used in facelets when a &lt;af:forEach&gt;
          is used in a facelets page, but no ADF functionality will be supported.
        </p>
      </div>
      
<div class="section">
<h3>Supported collections<a name="Supported_collections"></a></h3>
        The ADF forEach tag supports the following collections for the <tt>items</tt>
        attribute:
        
<ul>
          
<li>Java array</li>
          
<li>java.util.List</li>
          
<li>org.apache.myfaces.trinidad.model.CollectionModel</li>
          
<li>java.util.Map</li>
        </ul>
        
<p>
          When using a map, the map should be one that has a consistent order. Either the
          <tt>java.util.LinkedHashMap</tt> or <tt>java.util.TreeMap</tt> are examples of
          maps that provide this functionality. The keys for the maps must implement
          <tt>java.io.Serializable</tt>.
        </p>
      </div>
    </div>
    
<div class="section">
<h2>Usage<a name="Usage"></a></h2>
      
<div class="section">
<h3>Valid Use Cases<a name="Valid_Use_Cases"></a></h3>
        
<p>
          The for each tag is not as efficient as component stamping. When possible, the
          &lt;af:iterator&gt; should always be used instead of the for each tag. There are times
          this is not possible and usually involve the inclusion of content from other pages.
          For example, if different &lt;jsp:include&gt; tags need to be generated, pointing
          to different files based on items in a list, a for each tag must be used and not
          a stamping component like the ADF iterator.
        </p>
      </div>
      
<div class="section">
<h3>ID and Component State<a name="ID_and_Component_State"></a></h3>
        
<p>
          Due to the way JSF and JSP create <tt>ValueExpression</tt> objects, the for each tag
          cannot safely map the expressions created and stored on JSF components to the iteration of
          the for each loop. As a result, it is possible to cause a discrepency between the
          component's location in the for each tag and the value expressions that are stored in the
          tag.
        </p>
        
<p>
          Due to this limitation, the forEach tag must place usage requirements on the pages they
          are placed on. For index based collections (arrays and lists), the components must be
          mapped to the index of the for each loop and not the item in the collection. In these
          cases, the index of the for each loop is stored into the value expressions created and
          stored into the components. This results in the component state (like expanded state
          of disclosure components) being tied to the index of the for each loop. As a result,
          a key based collection (map or collection model) is always recommended when the collection
          may change between requests.
        </p>
        
<p>
          For key based collections (map and collection model), the component IDs must be
          associated with the key of the collection. This is because the key of the collection is
          used in the value expressions and if the ID were not bound to the key, then the component
          state would not match the EL values. You should associate the component to the key
          using immediate EL in the ID attribute. See the examples below.
        </p>
      </div>
      
<div class="section">
<h3>Generated IDs<a name="Generated_IDs"></a></h3>
        
<p>
          When the collection may change between requests, a key based collection should be used.
          When this is done, it is not recommended that JSF be allowed to generate the IDs of any
          components inside the for each tag. The reason is that JSF auto-generated IDs are based
          on the sequence that they are created in the current page. If items are re-arranged in
          the for each loop, the IDs will have a different generation order. As a result, JSF will
          not find the components with auto-generated IDs when it tries to map the JSP tag to the
          component ID. Existing components will be thrown out and new ones will be
          created and component state will be lost if this occurs.
        </p>
      </div>
      
<div class="section">
<h3>Reordering and Collection Modifications<a name="Reordering_and_Collection_Modifications"></a></h3>
        
<p>
          Modifications to the collection in the same JSF view (between requests) are only
          supported with key based collections. Even with this being supported, the for each tag
          will not auto-rearrange the children.
        </p>
        
<p>
          When JSP seeks to locate a component that was created in a previous request, it creates
          the ID that it expects the component to have and then searches the children of the parent
          component of the tag for the child component with that ID. If the component is not found,
          a new one will be created. If it is found, the framework does not do anything to the
          component, it is left to exist where it is found. This means that if you reorder items
          in your collection between requests, the component order will no longer match the order
          of the items in the collection. Page authors must reorder the components when changes
          to the collection are made.
        </p>
        
<p>
          ADF supports re-ordering of components using the change manager
          (<tt>org.apache.myfaces.trinidad.change.ChangeManager</tt>) and the
          <tt>org.apache.myfaces.trinidad.change.ReorderChildrenComponentChange</tt> class.
          The change manager may be retrieved from the
          <tt>org.apache.myfaces.trinidad.context.RequestContext</tt> instance. See the
          ADF demo application for examples on how to reorder the components when the
          collections changes.
        </p>
      </div>
      <a name="Naming_Containers_are_Recommended"></a>
<div class="section" id="Naming Containers are Recommended">
<h3><a name="null"></a></h3>
        
<p>
          When using a key based collection, it is recommended to use a naming container to
          simplify tying the component ID to the key. See the examples below.
        </p>
      </div>
    </div>
    
<div class="section">
<h2>Examples<a name="Examples"></a></h2>
      
<p>
        Please see the ADF demo application for complete examples.
      </p>
      
<div class="section">
<h3>Index Based Collection<a name="Index_Based_Collection"></a></h3>
        
<div class="source">
<pre>&lt;af:forEach var=&quot;person&quot; items=&quot;#{forEachBean.simpleList}&quot; varStatus=&quot;vs&quot;&gt;
  &lt;f:subview id=&quot;sv${vs.key}&quot;&gt;
    &lt;af:panelGroupLayout id=&quot;personPgl&quot; layout=&quot;horizontal&quot;&gt;
      &lt;af:outputText id=&quot;personName&quot; value=&quot;#{person.firstName} #{person.firstName}&quot;
                     inlineStyle=&quot;padding-right: 1em;&quot;/&gt;
      &lt;af:outputText id=&quot;clientId&quot; value=&quot;(Client ID: #{component.clientId})&quot;/&gt;
    &lt;/af:panelGroupLayout&gt;
    &lt;af:spacer id=&quot;s1&quot; height=&quot;1em&quot; /&gt;
  &lt;/f:subview&gt;
&lt;/af:forEach&gt;</pre></div>
      </div>
      
<div class="section">
<h3>Key Based Collection<a name="Key_Based_Collection"></a></h3>
        
<div class="source">
<pre>&lt;af:forEach var=&quot;person&quot; items=&quot;#{forEachBean.collectionModel}&quot; varStatus=&quot;vs&quot;&gt;
  &lt;f:subview id=&quot;sv${vs.key}&quot;&gt;
    &lt;af:panelGroupLayout id=&quot;personPgl&quot; layout=&quot;horizontal&quot;&gt;
      &lt;af:outputText id=&quot;personName&quot; value=&quot;#{person.firstName} #{person.firstName}&quot;
                     inlineStyle=&quot;padding-right: 1em;&quot;/&gt;
      &lt;af:outputText id=&quot;clientId&quot; value=&quot;(Client ID: #{component.clientId})&quot;/&gt;
    &lt;/af:panelGroupLayout&gt;
    &lt;af:spacer id=&quot;s1&quot; height=&quot;1em&quot; /&gt;
  &lt;/f:subview&gt;
&lt;/af:forEach&gt;</pre></div>
      </div>
      
<div class="section">
<h3>Example Re-Order Code<a name="Example_Re-Order_Code"></a></h3>
        
<div class="source">
<pre>
// Create a list of all the children IDs of the parent component of the for each loop. This must
// contain all the children, not just those created by the for each tag.
List&lt;String&gt; orderedIds = ...;

// Get the reference to the component that is the parent of the for each tag. For finding relative
// components, you may try using
// org.apache.myfaces.trinidad.util.ComponentUtils.findRelativeComponent(UIComponent, String)
UIComponent forEachParent = ...;

ReorderChildrenComponentChange componentChange = new ReorderChildrenComponentChange(orderedIds);
RequestContext requestContext = RequestContext.getCurrentInstance();
ChangeManager cm = requestContext.getChangeManager();
// The component change must be added before the tag execution (before the render response JSF
// phase)
cm.addComponentChange(FacesContext.getCurrentInstance(), forEachParentComponent,
  componentChange);

// Ensure that the view is updated during PPR requests
requestContext.addPartialTarget(forEachParentComponent);
        </pre></div>
      </div>
    </div>
    
<div class="section">
<h2>Attributes<a name="Attributes"></a></h2>
      
<table border="0" class="bodyTable">
        
<tr class="a">
          
<th>Name</th>
          
<th>Type</th>
          
<th>Supports EL?</th>
          
<th>Description</th>
        </tr>
        
<tr class="b">
          
<td>begin</td>
          
<td>primitive int or java.lang.Number subclass</td>
          
<td>No</td>
          
<td>index at which iteration begins</td>
        </tr>
        
<tr class="a">
          
<td>end</td>
          
<td>primitive int or java.lang.Number subclass</td>
          
<td>No</td>
          
<td>index at which iteration ends</td>
        </tr>
        
<tr class="b">
          
<td>items</td>
          
<td>Object</td>
          
<td>Only EL</td>
          
<td>
            the collection to iterate over. Supported classes:
            
<ul>
              
<li>Java array</li>
              
<li>java.util.List</li>
              
<li>org.apache.myfaces.trinidad.model.CollectionModel</li>
              
<li>java.util.Map</li>
            </ul>
          </td>
        </tr>
        
<tr class="a">
          
<td>step</td>
          
<td>primitive int or java.lang.Number subclass</td>
          
<td>No</td>
          
<td>number to increment the index by on each iteration</td>
        </tr>
        
<tr class="b">
          
<td>var</td>
          
<td>String</td>
          
<td>No</td>
          
<td>
            name of the variable exposed when iterating that references
            the item in the collection
          </td>
        </tr>
        
<tr class="a">
          
<td>varStatus</td>
          
<td>String</td>
          
<td>No</td>
          
<td>
            name of the loop status exposed when iterating.
            
<p>Properties:</p>
            
<table border="0" class="bodyTable">
              
<tr class="b">
                
<th>Name</th>
                
<th>Description</th>
              </tr>
              
<tr class="a">
                
<td>index</td>
                
<td>the current index (int)</td>
              </tr>
              
<tr class="b">
                
<td>count</td>
                
<td>the current iteration number starting at one. If the start is 5, and the current index is 5, the count returns 1 (int)</td>
              </tr>
              
<tr class="a">
                
<td>step</td>
                
<td>the value to add to each index after an iteration (defaults to 1)</td>
              </tr>
              
<tr class="b">
                
<td>begin</td>
                
<td>the index to start at when collections are not used (int)</td>
              </tr>
              
<tr class="a">
                
<td>end</td>
                
<td>the last index when collections are not used (int)</td>
              </tr>
              
<tr class="b">
                
<td>first</td>
                
<td>true if this is the first iteration (boolean)</td>
              </tr>
              
<tr class="a">
                
<td>last</td>
                
<td>true if this is the last iteration (boolean)</td>
              </tr>
              
<tr class="b">
                
<td>key</td>
                
<td>the index (int) for index based collections and when
                  the items has not been specified. The key (java.io.Serializable)
                  for key based collections</td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </div>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2019
                      Oracle Corporation.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
